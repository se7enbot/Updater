<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>handleTask</title>
</head>

<body>
  <script>
    /**
     * modify by @LXK9301
     * author by @leecobaby
     * 2021-01-21
     */

    !(() => {
      let api = ''
      let secretp = ''
      let taskId = ''
      let itemId = ''
      let actionType = ''
      let inviteId = ''
      let shopSign = ''
      let body

      switch (api) {
        case "nian_collectScore":
          body = collectScore(secretp, taskId, itemId, actionType, inviteId, shopSign)
          break
        case "nian_collectProduceScore":
          body = collectProduceScore(secretp, taskId)
          break
        case "nian_killCoupon":
          body = killCoupon(secretp, taskId)
          break
        case "nian_doShopLottery":
          body = doShopLottery(shopSign)
          break
      }
      document.write(JSON.stringify(body))
    })()

    function collectProduceScore(secretp, taskId) {
      let temp = {
        "taskId": taskId,
        "rnd": getRnd(),
        "inviteId": "-1",
        "stealId": "-1"
      }
      const extraData = {
        "jj": 6,
        "buttonid": "jmdd-react-smash_0",
        "sceneid": "homePageh5",
        "appid": '50073'
      }
      const body = encode(temp, secretp, extraData)
      return body
    }

    function collectScore(secretp, taskId, itemId, actionType = null, inviteId = null, shopSign = null) {
      let temp = {
        "taskId": taskId,
        "rnd": getRnd(),
        "inviteId": "-1",
        "stealId": "-1"
      }
      if (itemId) temp['itemId'] = itemId
      if (actionType) temp['actionType'] = actionType
      if (inviteId) temp['inviteId'] = inviteId
      if (shopSign) temp['shopSign'] = shopSign
      const extraData = {
        "jj": 6,
        "buttonid": "jmdd-react-smash_0",
        "sceneid": "homePageh5",
        "appid": '50073'
      }
      let body = {
        ...encode(temp, secretp, extraData),
        taskId: taskId,
        itemId: itemId
      }
      if (actionType) body['actionType'] = actionType
      if (inviteId) body['inviteId'] = inviteId
      if (shopSign) body['shopSign'] = shopSign
      return body
    }

    function doShopLottery(shopSign) {
      let body = { "shopSign": shopSign }
      return body
    }

    function killCoupon(secretp, skuId) {
      let temp = {
        "skuId": skuId,
        "rnd": getRnd(),
        "inviteId": "-1",
        "stealId": "-1"
      }
      const extraData = {
        "jj": 6,
        "buttonid": "jmdd-react-smash_0",
        "sceneid": "homePageh5",
        "appid": '50073'
      }
      let body = encode(temp, secretp, extraData);
      body['skuId'] = skuId
      return body
    }

    function killCoupon(secretp, skuId) {
      let temp = {
        "skuId": skuId,
        "rnd": getRnd(),
        "inviteId": "-1",
        "stealId": "-1"
      }
      const extraData = {
        "jj": 6,
        "buttonid": "jmdd-react-smash_0",
        "sceneid": "homePageh5",
        "appid": '50073'
      }
      let body = encode(temp, secretp, extraData);
      body['skuId'] = skuId
      return body
    }

    function encode(data, secretp, extraData) {
      const temp = {
        "extraData": extraData,
        "businessData": data,
        "secretp": secretp,
      }
      return { "ss": (JSON.stringify(temp)) };
    }

    function getRnd() {
      return Math.floor(1e6 * Math.random()).toString();
    }
  </script>
</body>

</html>